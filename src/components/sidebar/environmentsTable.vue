<template>
  <div v-show="envStats" class="aside__box active">
    <div class="aside__box-title">
      <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M0 2.625C0 2.07272 0.447715 1.625 1 1.625H2.54041C3.09269 1.625 3.54041 2.07272 3.54041 2.625V4.16541C3.54041 4.71769 3.09269 5.16541 2.54041 5.16541H1C0.447715 5.16541 0 4.71769 0 4.16541V2.625Z" fill="white"/>
        <path d="M4.66553 2.625C4.66553 2.07272 5.11324 1.625 5.66553 1.625H15C15.5523 1.625 16 2.07272 16 2.625V4.16541C16 4.71769 15.5523 5.16541 15 5.16541H5.66553C5.11324 5.16541 4.66553 4.71769 4.66553 4.16541V2.625Z" fill="white"/>
        <path d="M0 7.21875C0 6.66647 0.447715 6.21875 1 6.21875H2.54041C3.09269 6.21875 3.54041 6.66647 3.54041 7.21875V8.75916C3.54041 9.31144 3.09269 9.75916 2.54041 9.75916H1C0.447715 9.75916 0 9.31144 0 8.75916V7.21875Z" fill="white"/>
        <path d="M4.66553 7.21875C4.66553 6.66647 5.11324 6.21875 5.66553 6.21875H15C15.5523 6.21875 16 6.66647 16 7.21875V8.75916C16 9.31144 15.5523 9.75916 15 9.75916H5.66553C5.11324 9.75916 4.66553 9.31144 4.66553 8.75916V7.21875Z" fill="white"/>
        <path d="M0 11.813C0 11.2607 0.447715 10.813 1 10.813H2.54041C3.09269 10.813 3.54041 11.2607 3.54041 11.813V13.3535C3.54041 13.9058 3.09269 14.3535 2.54041 14.3535H1C0.447715 14.3535 0 13.9058 0 13.3535V11.813Z" fill="white"/>
        <path d="M4.66553 11.813C4.66553 11.2607 5.11324 10.813 5.66553 10.813H15C15.5523 10.813 16 11.2607 16 11.813V13.3535C16 13.9058 15.5523 14.3535 15 14.3535H5.66553C5.11324 14.3535 4.66553 13.9058 4.66553 13.3535V11.813Z" fill="white"/>
      </svg>
      <span>Table</span>
      <div @click="showTable = !showTable">
        <svg class="arrow" width="11" height="6" viewbox="0 0 11 6" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M5.49999 6L0.736847 0H10.2631L5.49999 6Z" fill="white"/>
        </svg>
      </div>
    </div>

    <div v-if="showTable" class="aside__box-main">
      <table>
        <tbody>
        <tr>
          <td></td>
          <td>
            <svg width="28" height="28" viewbox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M19.8337 13.3478C19.5118 13.3478 19.2501 13.0863 19.2501 12.7642C19.2501 11.128 18.613 9.58974 17.4563 8.43298C17.2288 8.20547 17.2288 7.83633 17.4563 7.60796C17.6838 7.3796 18.0531 7.38046 18.2815 7.60796C19.6587 8.98519 20.4173 10.8166 20.4173 12.7642C20.4165 13.0863 20.1556 13.3478 19.8337 13.3478Z" fill="white"/>
              <path d="M8.16663 13.348C7.8447 13.348 7.58301 13.0865 7.58301 12.7644C7.58301 10.8167 8.34158 8.98536 9.71881 7.60813C9.94632 7.38062 10.3157 7.38062 10.544 7.60813C10.7724 7.83564 10.7715 8.20478 10.544 8.43314C9.38727 9.58991 8.75025 11.1282 8.75025 12.7644C8.75025 13.0865 8.48856 13.348 8.16663 13.348Z" fill="white"/>
              <path d="M19.4714 16.8655C18.5896 16.1202 18.0837 15.0299 18.0837 13.8757V12.25C18.0837 10.1973 16.5587 8.49792 14.5837 8.21359V7.58362C14.5837 7.26083 14.3221 7 14.0001 7C13.6782 7 13.4165 7.26083 13.4165 7.58362V8.21359C11.4407 8.49792 9.9165 10.1973 9.9165 12.25V13.8765C9.9165 15.0307 9.41064 16.1202 8.52347 16.8709C8.29681 17.0651 8.1665 17.3477 8.1665 17.6461C8.1665 18.2088 8.62408 18.6672 9.18762 18.6672H18.8126C19.3753 18.6672 19.8337 18.2097 19.8337 17.6461C19.8337 17.3477 19.7034 17.0651 19.4714 16.8655Z" fill="white"/>
              <path d="M14.0002 21C15.0563 21 15.9401 20.2474 16.143 19.25H11.8564C12.0602 20.2474 12.944 21 14.0002 21Z" fill="white"/>
            </svg>
          </td>
          <td>
            <svg width="28" height="28" viewbox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M12.8336 21C13.8898 21 14.7736 20.2474 14.9765 19.25H10.6899C10.8937 20.2474 11.7766 21 12.8336 21Z" fill="white"/>
              <path d="M17.2524 15.4561C17.2375 15.4561 17.2227 15.4586 17.2078 15.4586C14.6345 15.4586 12.5414 13.3647 12.5414 10.7922C12.5414 9.78159 12.8678 8.8472 13.4164 8.08243V7.58362C13.4164 7.26083 13.1555 7 12.8336 7C12.5117 7 12.25 7.26083 12.25 7.58362V8.21359C10.2742 8.49792 8.75 10.1973 8.75 12.25V13.8765C8.75 15.0307 8.24435 16.1202 7.35696 16.8709C7.13031 17.0651 7 17.3477 7 17.6461C7 18.2088 7.45758 18.6672 8.02112 18.6672H17.6461C18.2088 18.6672 18.6672 18.2097 18.6672 17.6461C18.6672 17.3477 18.5369 17.0651 18.3049 16.8664C17.8439 16.4772 17.4895 15.9933 17.2524 15.4561Z" fill="white"/>
              <path d="M17.2084 7C15.1181 7 13.417 8.70108 13.417 10.7914C13.417 12.8817 15.1181 14.5828 17.2084 14.5828C19.2987 14.5828 20.9998 12.8825 20.9998 10.7914C20.9998 8.70023 19.2987 7 17.2084 7Z" fill="white"/>
              <path d="M17.5681 9.08515H16.8841L16.9161 11.1651H17.5321L17.5681 9.08515ZM16.9721 11.5171C16.8401 11.6571 16.8401 11.8811 16.9721 12.0211C17.1121 12.1531 17.3361 12.1531 17.4761 12.0211C17.6161 11.8811 17.6161 11.6571 17.4761 11.5171C17.3361 11.3771 17.1121 11.3771 16.9721 11.5171Z" fill="#3C3C3C"/>
            </svg>
          </td>
          <td>
            <svg width="28" height="28" viewbox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M12.8336 21C13.8898 21 14.7736 20.2474 14.9765 19.25H10.6899C10.8937 20.2474 11.7766 21 12.8336 21Z" fill="white"/>
              <path d="M17.0624 14.5834H14.4374C14.2746 14.5834 14.1251 14.4924 14.0496 14.3488C13.9736 14.2044 13.9849 14.0312 14.0778 13.8974L16.2267 10.792H14.4374C14.196 10.792 13.9999 10.5961 13.9999 10.3545C13.9999 10.1131 14.196 9.91699 14.4374 9.91699H17.0624C17.2252 9.91699 17.3747 10.008 17.4501 10.1516C17.5262 10.296 17.5148 10.4692 17.4219 10.6029L15.2731 13.7084H17.0624C17.3038 13.7084 17.4999 13.9045 17.4999 14.1459C17.4999 14.3875 17.3038 14.5834 17.0624 14.5834Z" fill="white"/>
              <path d="M20.5626 10.4999H19.104C18.9395 10.4999 18.7899 10.408 18.7145 10.2628C18.6393 10.1175 18.6524 9.94168 18.7479 9.80859L19.7122 8.4585H19.104C18.8624 8.4585 18.6665 8.2626 18.6665 8.021C18.6665 7.7796 18.8624 7.5835 19.104 7.5835H20.5626C20.7271 7.5835 20.8766 7.67535 20.952 7.82062C21.0272 7.96588 21.0142 8.14169 20.9187 8.27478L19.9544 9.62488H20.5626C20.804 9.62488 21.0001 9.82098 21.0001 10.0624C21.0001 10.3038 20.804 10.4999 20.5626 10.4999Z" fill="white"/>
              <path d="M18.3041 16.8655C17.8394 16.4727 17.4825 15.9828 17.2462 15.4394C17.186 15.4482 17.1255 15.4578 17.0625 15.4578H14.4375C13.9466 15.4578 13.5012 15.1873 13.2745 14.7526C13.0481 14.3211 13.0795 13.8005 13.3596 13.398L14.5582 11.6664H14.4375C13.714 11.6664 13.125 11.0774 13.125 10.3539C13.125 9.63034 13.714 9.04138 14.4375 9.04138H15.3484C14.799 8.61179 14.1391 8.31677 13.4172 8.21274V7.58276C13.4164 7.26083 13.1555 7 12.8336 7C12.5117 7 12.25 7.26083 12.25 7.58362V8.21359C10.2742 8.49792 8.75 10.1973 8.75 12.25V13.8765C8.75 15.0307 8.24435 16.1202 7.35696 16.8709C7.13031 17.0651 7 17.3477 7 17.6461C7 18.2088 7.45758 18.6672 8.02112 18.6672H17.6461C18.2088 18.6672 18.6672 18.2097 18.6672 17.6461C18.6672 17.3477 18.5369 17.0651 18.3041 16.8655Z" fill="white"/>
            </svg>
          </td>
          <td>
            <svg width="28" height="28" viewbox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M14.0002 21C15.0563 21 15.9401 20.2474 16.143 19.25H11.8564C12.0602 20.2474 12.944 21 14.0002 21Z" fill="white"/>
              <path d="M19.4706 16.8655C18.5885 16.1202 18.0829 15.0299 18.0829 13.8757V12.25C18.0829 10.1973 16.5578 8.49792 14.5829 8.21359V7.58362C14.5837 7.26083 14.3221 7 14.0001 7C13.6782 7 13.4165 7.26083 13.4165 7.58362V8.21359C11.4407 8.49792 9.9165 10.1973 9.9165 12.25V13.8765C9.9165 15.0307 9.41064 16.1202 8.52347 16.8709C8.29681 17.0651 8.1665 17.3477 8.1665 17.6461C8.1665 18.2088 8.62408 18.6672 9.18762 18.6672H18.8126C19.3753 18.6672 19.8337 18.2097 19.8337 17.6461C19.8337 17.3477 19.7034 17.0651 19.4706 16.8655Z" fill="white"/>
              <path d="M20.4163 20.9998C20.2668 20.9998 20.1179 20.943 20.0042 20.8291L7.17063 7.99548C6.94312 7.76797 6.94312 7.39883 7.17063 7.17046C7.39814 6.9421 7.76728 6.94296 7.99564 7.17046L20.8293 20.0041C21.0568 20.2316 21.0568 20.6007 20.8293 20.8291C20.7156 20.943 20.5659 20.9998 20.4163 20.9998Z" fill="white"/>
            </svg>
          </td>
        </tr>
        <tr v-for="(envName, envId) in envList" :key="envId">
          <td>{{envName}}</td>
          <td>{{getTableValue(envId, 'active')}}</td>
          <td>{{getTableValue(envId, 'handled')}}</td>
          <td>{{getTableValue(envId, 'snoozed')}}</td>
          <td>{{getTableValue(envId, 'acknowledged')}}</td>
        </tr>
        </tbody>
      </table>
    </div>
  </div>

</template>
<script>
export default {
  props: [
    'envStats'
  ],
  data () {
    return {
      showTable: false
    }
  },
  computed: {
    envList () {
      return this.$store.state.config.environments
    }
  },
  // beforeMount () {
  //   console.log(this.envStats)
  // },
  methods: {
    getTableValue (envId, dst) {
      if (this.envStats) {
        if (envId in this.envStats) {
          return this.envStats[envId][dst]
        }
        return -1
      }
      return -2
    }
  }
}
</script>

<style scoped>

</style>
